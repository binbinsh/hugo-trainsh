{{- $hugo := `<a href="https://gohugo.io/" target="_blank">Hugo</a>` -}}
{{- $theme := `<a href="https://github.com/binbinsh/hugo-trainsh" target="_blank">hugo-trainsh</a>` -}}
{{- $social := site.Params.social -}}

{{- /* Collect all social/subscribe links */ -}}
{{- $links := slice -}}

{{- with site.Home.OutputFormats.Get "RSS" -}}
  {{- $links = $links | append (dict "url" .RelPermalink "label" "RSS" "icon" "rss") -}}
{{- end -}}

{{- with site.Params.subscribe.emailUrl -}}
  {{- $links = $links | append (dict "url" . "label" (i18n "email") "icon" "mail") -}}
{{- end -}}

{{- with $social -}}
  {{- with .github -}}
    {{- $links = $links | append (dict "url" . "label" (i18n "social_github") "icon" "github") -}}
  {{- end -}}
  {{- with .x -}}
    {{- $links = $links | append (dict "url" . "label" (i18n "social_x") "icon" "x") -}}
  {{- end -}}
  {{- with .linkedin -}}
    {{- $links = $links | append (dict "url" . "label" (i18n "social_linkedin") "icon" "linkedin") -}}
  {{- end -}}
  {{- with .email -}}
    {{- $href := cond (hasPrefix . "mailto:") . (printf "mailto:%s" .) -}}
    {{- $links = $links | append (dict "url" $href "label" (i18n "email") "icon" "mail") -}}
  {{- end -}}
{{- end -}}

{{- if gt (len $links) 0 -}}
<nav class="footer-links" aria-label="Social links">
  {{- range $links -}}
    <a href="{{ .url }}" title="{{ .label }}" aria-label="{{ .label }}">{{ .label }}</a>
  {{- end -}}
</nav>
{{- end -}}

{{- /* Language switcher */ -}}
{{- $translations := .AllTranslations -}}
{{- if lt (len $translations) 2 -}}
  {{- $translations = site.Home.AllTranslations -}}
{{- end -}}
{{- if gt (len $translations) 1 -}}
<p class="footer-lang">
  {{- range $i, $t := $translations -}}
    {{- if $i }} · {{ end -}}
    {{- if eq $t.Lang $.Lang -}}
      <span class="footer-lang-current">{{ $t.Site.Language.LanguageName }}</span>
    {{- else -}}
      <a href="{{ $t.RelPermalink }}">{{ $t.Site.Language.LanguageName }}</a>
    {{- end -}}
  {{- end -}}
</p>
{{- end -}}

<p>&copy; {{ now.Year }} {{ site.Title }} — {{ i18n "powered_by" (dict "Hugo" $hugo "Theme" $theme) | safeHTML }}</p>
