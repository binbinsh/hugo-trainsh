{{ define "main" }}
<header class="mb-8">
  <h1 class="text-3xl font-bold">{{ .Title }}</h1>
</header>

<section class="mb-8">
  <input id="archive-search" type="search" placeholder="{{ i18n "type_to_search" }}" aria-label="{{ i18n "search_posts" }}" autocomplete="off" data-index-url="{{ "index.json" | relURL }}" class="w-full px-4 py-2 bg-[var(--color-surface)] border border-[var(--color-border)] rounded-lg focus:outline-none focus:border-[var(--color-accent)] transition-colors">
</section>

{{ $sections := default (slice "posts") site.Params.mainSections }}
{{ $pages := where site.RegularPages "Section" "in" $sections }}

<section id="archive-groups">
  {{ range ($pages.GroupByDate "2006" "desc") }}
  <div class="mb-8">
    <h2 class="text-xl font-semibold mb-4 text-[var(--color-muted)]">{{ .Key }}</h2>
    <ul class="space-y-2">
      {{ range .Pages.ByDate.Reverse }}
      <li class="flex gap-4 items-baseline">
        <time class="text-sm text-[var(--color-muted)] font-mono shrink-0" datetime="{{ .Date | time.Format "2006-01-02" }}">
          {{ .Date | time.Format "Jan 02" }}
        </time>
        <a href="{{ .RelPermalink }}" class="hover:text-[var(--color-accent)] transition-colors truncate">
          {{ .Title }}
        </a>
      </li>
      {{ end }}
    </ul>
  </div>
  {{ end }}
</section>

<section id="archive-results" hidden></section>
{{ end }}
